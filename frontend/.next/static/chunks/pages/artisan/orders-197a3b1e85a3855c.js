(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[568],{3182:function(e,s,t){(window.__NEXT_P=window.__NEXT_P||[]).push(["/artisan/orders",function(){return t(3407)}])},3407:function(e,s,t){"use strict";t.r(s),t.d(s,{default:function(){return l}});var a=t(5893),d=t(7294),i=t(8987),n=t(8506);function l(){let{isAuthenticated:e,isArtisan:s,user:t}=(0,n.a)(),[l,c]=(0,d.useState)([]),[r,o]=(0,d.useState)(!0);(0,d.useEffect)(()=>{e&&s&&x()},[e,s]);let x=async()=>{try{o(!0);let e=await i.Z.get("/api/orders"),s=[];for(let a of e.data){let e=await i.Z.get("/api/orders/".concat(a.id,"/items")),d=e.data.filter(e=>e.artisan_id===t.id);d.length>0&&s.push({...a,items:d})}c(s)}catch(e){c([])}finally{o(!1)}};return e&&s?(0,a.jsxs)("div",{className:"max-w-5xl mx-auto px-4 py-8",children:[(0,a.jsx)("h1",{className:"text-3xl font-bold mb-6 text-orange-600",children:"Pedidos de Mis Productos"}),r?(0,a.jsx)("div",{className:"text-center py-12",children:"Cargando pedidos..."}):0===l.length?(0,a.jsx)("div",{className:"text-center py-12 text-gray-500",children:"No hay pedidos para tus productos."}):(0,a.jsx)("div",{className:"space-y-6",children:l.map(e=>(0,a.jsxs)("div",{className:"bg-white rounded-lg shadow p-4",children:[(0,a.jsxs)("div",{className:"flex justify-between items-center mb-2",children:[(0,a.jsxs)("div",{className:"font-semibold text-lg text-gray-900",children:["Pedido #",e.id]}),(0,a.jsx)("span",{className:"text-xs px-2 py-1 rounded-full bg-orange-100 text-orange-700 font-semibold",children:e.status})]}),(0,a.jsxs)("div",{className:"text-gray-600 text-sm mb-1",children:["Total: ",(0,a.jsxs)("span",{className:"font-bold text-orange-600",children:["$",e.total]})]}),(0,a.jsxs)("div",{className:"text-gray-500 text-xs",children:["Fecha: ",new Date(e.created_at).toLocaleString()]}),(0,a.jsxs)("div",{className:"text-gray-500 text-xs",children:["Env\xedo: ",e.shipping_address]}),(0,a.jsxs)("div",{className:"mt-2",children:[(0,a.jsx)("div",{className:"font-semibold text-sm mb-1",children:"Tus productos en este pedido:"}),(0,a.jsx)("ul",{className:"list-disc pl-6 text-sm",children:e.items.map(e=>(0,a.jsxs)("li",{children:[e.name," x ",e.quantity," - ",(0,a.jsxs)("span",{className:"text-orange-600 font-semibold",children:["$",e.price]})]},e.id))})]})]},e.id))})]}):(0,a.jsx)("div",{className:"text-center py-12",children:"Acceso denegado. Solo artesanos pueden ver esta p\xe1gina."})}}},function(e){e.O(0,[774,888,179],function(){return e(e.s=3182)}),_N_E=e.O()}]);