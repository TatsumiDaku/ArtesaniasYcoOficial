(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[781],{8238:function(e,a,r){(window.__NEXT_P=window.__NEXT_P||[]).push(["/artisan/create-product",function(){return r(2956)}])},2956:function(e,a,r){"use strict";r.r(a),r.d(a,{default:function(){return c}});var n=r(5893),t=r(7294),s=r(8987),o=r(8506),i=r(1163);function c(){let{isAuthenticated:e,isArtisan:a}=(0,o.a)(),r=(0,i.useRouter)(),[c,l]=(0,t.useState)([]),[d,u]=(0,t.useState)({name:"",description:"",price:"",stock:"",category_id:"",images:[]}),[p,g]=(0,t.useState)(!1),[m,x]=(0,t.useState)("");(0,t.useEffect)(()=>{f()},[]);let f=async()=>{try{let e=await s.Z.get("/api/products/categories");l(e.data)}catch(e){l([])}};if(!e||!a)return(0,n.jsx)("div",{className:"text-center py-12",children:"Acceso denegado. Solo artesanos pueden ver esta p\xe1gina."});let b=e=>{u({...d,[e.target.name]:e.target.value})},h=e=>{u({...d,images:Array.from(e.target.files)})},y=async e=>{e.preventDefault(),g(!0),x("");try{let e=new FormData;e.append("name",d.name),e.append("description",d.description),e.append("price",d.price),e.append("stock",d.stock),e.append("category_id",d.category_id),d.images.forEach(a=>e.append("images",a)),await s.Z.post("/api/products",e,{headers:{"Content-Type":"multipart/form-data"}}),x("Producto creado exitosamente"),setTimeout(()=>r.push("/artisan/products"),1500)}catch(e){var a,n;x((null===(a=e.response)||void 0===a?void 0:null===(n=a.data)||void 0===n?void 0:n.message)||"Error al crear producto")}finally{g(!1)}};return(0,n.jsxs)("div",{className:"max-w-xl mx-auto px-4 py-8",children:[(0,n.jsx)("h1",{className:"text-3xl font-bold mb-6 text-orange-600",children:"Crear Nuevo Producto"}),(0,n.jsxs)("form",{onSubmit:y,className:"bg-white rounded-lg shadow p-6 space-y-4",encType:"multipart/form-data",children:[(0,n.jsxs)("div",{children:[(0,n.jsx)("label",{className:"block text-gray-700 mb-1",children:"Nombre"}),(0,n.jsx)("input",{type:"text",name:"name",className:"w-full border border-gray-300 rounded-lg px-3 py-2 focus:outline-none focus:ring-2 focus:ring-orange-500",value:d.name,onChange:b,required:!0})]}),(0,n.jsxs)("div",{children:[(0,n.jsx)("label",{className:"block text-gray-700 mb-1",children:"Descripci\xf3n"}),(0,n.jsx)("textarea",{name:"description",className:"w-full border border-gray-300 rounded-lg px-3 py-2 focus:outline-none focus:ring-2 focus:ring-orange-500",value:d.description,onChange:b,required:!0})]}),(0,n.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,n.jsxs)("div",{children:[(0,n.jsx)("label",{className:"block text-gray-700 mb-1",children:"Precio"}),(0,n.jsx)("input",{type:"number",name:"price",className:"w-full border border-gray-300 rounded-lg px-3 py-2 focus:outline-none focus:ring-2 focus:ring-orange-500",value:d.price,onChange:b,required:!0,min:0,step:.01})]}),(0,n.jsxs)("div",{children:[(0,n.jsx)("label",{className:"block text-gray-700 mb-1",children:"Stock"}),(0,n.jsx)("input",{type:"number",name:"stock",className:"w-full border border-gray-300 rounded-lg px-3 py-2 focus:outline-none focus:ring-2 focus:ring-orange-500",value:d.stock,onChange:b,required:!0,min:0})]})]}),(0,n.jsxs)("div",{children:[(0,n.jsx)("label",{className:"block text-gray-700 mb-1",children:"Categor\xeda"}),(0,n.jsxs)("select",{name:"category_id",className:"w-full border border-gray-300 rounded-lg px-3 py-2 focus:outline-none focus:ring-2 focus:ring-orange-500",value:d.category_id,onChange:b,required:!0,children:[(0,n.jsx)("option",{value:"",children:"Selecciona una categor\xeda"}),c.map(e=>(0,n.jsx)("option",{value:e.id,children:e.name},e.id))]})]}),(0,n.jsxs)("div",{children:[(0,n.jsx)("label",{className:"block text-gray-700 mb-1",children:"Im\xe1genes"}),(0,n.jsx)("input",{type:"file",name:"images",multiple:!0,accept:"image/*",onChange:h,className:"w-full"})]}),m&&(0,n.jsx)("div",{className:"text-green-600 text-sm",children:m}),(0,n.jsx)("button",{type:"submit",className:"w-full bg-orange-600 text-white py-2 rounded-lg hover:bg-orange-700 transition-colors font-semibold",disabled:p,children:p?"Creando...":"Crear Producto"})]})]})}},1163:function(e,a,r){e.exports=r(6885)}},function(e){e.O(0,[774,888,179],function(){return e(e.s=8238)}),_N_E=e.O()}]);